(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{233:function(e,t,n){e.exports=n(466)},238:function(e,t,n){},466:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(46),a=n.n(i),c=(n(238),n(20)),u=n(21),s=n(24),l=n(22),p=n(25),h=n(132),d=n(15),f=n(12),y=n(37),m=n.n(y),b="https://glossy-window-229523.appspot.com/api",v=n(66),E=n.n(v),j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={timer:null},n.props.getSummary(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=setInterval(this.props.getSummary,1e3);this.setState({timer:e})}},{key:"render",value:function(){var e={},t=!0,n=!1,o=void 0;try{for(var i,a=this.props.summary[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var c=i.value;e[c._id]=c.count}}catch(k){n=!0,o=k}finally{try{t||null==a.return||a.return()}finally{if(n)throw o}}var u=[],s=0,l=this.props.entities,p=!0,d=!1,y=void 0;try{for(var m,b=l[Symbol.iterator]();!(p=(m=b.next()).done);p=!0){var v=m.value,j=[],x=!0,O=!1,w=void 0;try{for(var g,S=v[Symbol.iterator]();!(x=(g=S.next()).done);x=!0){var I=g.value;e.hasOwnProperty(I)?j.push(e[I]):j.push(0)}}catch(k){O=!0,w=k}finally{try{x||null==S.return||S.return()}finally{if(O)throw w}}var T={datasets:[{data:j,backgroundColor:["red","yellow","blue","green"]}],labels:v};u.push(r.createElement(f.c,{key:s++},r.createElement(h.a,{data:T}))),v!==l[l.length-1]&&u.push(r.createElement(E.a,{key:s++}))}}catch(k){d=!0,y=k}finally{try{p||null==b.return||b.return()}finally{if(d)throw y}}return r.createElement(f.b,null,u)}}]),t}(r.Component),x=Object(d.b)(function(e){return{summary:e.polls.summary,entities:e.polls.entities}},function(e){return{getSummary:function(){return function(e){m()(b+"/getSummary").then(function(e){if(e.status>=400)throw new Error(e.body);return e.json()}).then(function(t){e({type:"GET_SUMMARY",summary:t})}).catch(function(e){return console.error(e)})}(e)}}})(j),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).props.init(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.createElement(f.a,{position:"relative"},r.createElement(f.f,{variant:"h4",color:"inherit",align:"center"},"Polls"))}}]),t}(r.Component),w=Object(d.b)(null,function(e){return{init:function(){return function(e){e({type:"FETCH_ENTITIES"}),m()(b+"/getEntities").then(function(e){if(e.status>=400)throw new Error(e.json().toString());return e.json()}).then(function(t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value;n.push(u.data)}}catch(s){o=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}e({type:"GOT_ENTITIES",entities:n})}).catch(function(e){return console.error(e)})}(e)}}})(O),g=n(64),S=n.n(g),I=n(65),T=n.n(I),k=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.nextEntity,n=[],o=function(o){n.push(r.createElement(T.a,{key:o,onClick:function(){return e.props.selected_add(t[o])},button:!0},r.createElement(f.d,{primary:t[o],align:"center"})))};for(var i in t)o(i);return r.createElement(S.a,{component:"nav"},n)}}]),t}(r.Component),_=Object(d.b)(function(e){return{nextEntity:e.polls.nextEntity}},function(e){return{selected_add:function(t){return e(function(e){return{type:"ADD",selected:e}}(t))}}})(k),C=n(48),D=n.n(C),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).props.checkUser(n.props.ip),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.nextIndex,r=t.entities,i=t.ip,a=t.selected;return t.exist||n>r.length?(n>r.length&&this.props.upload(a,i),e=o.a.createElement(x,null)):e=o.a.createElement(_,null),o.a.createElement(D.a,{container:!0,alignItems:"center",justify:"center"},o.a.createElement(D.a,{item:!0,lg:4,sm:8,xs:12},o.a.createElement(f.e,null,o.a.createElement(w,null),e)))}}]),t}(r.Component),P=Object(d.b)(function(e){return{ip:e.polls.ip,exist:e.polls.exist,selected:e.polls.selected,entities:e.polls.entities,nextIndex:e.polls.nextIndex}},function(e){return{checkUser:function(t){return function(e){m()("https://json.geoiplookup.io/api").then(function(e){if(e.status>=400)throw new Error(e.body);return e.json()}).then(function(t){var n=t.ip;e({type:"GOT_IP",ip:n}),m()(b+"/queryUser",{method:"POST",body:JSON.stringify({ip:n}),headers:{"Content-Type":"application/json"}}).then(function(e){if(e.status>=400)throw new Error(e.body);return e.json()}).then(function(t){e({type:"UPDATE_EXIST",exist:t.exist})}).catch(function(e){return console.log(e)})}).catch(function(e){return console.error(e)})}(e)},upload:function(t,n){return function(e,t){return function(n){m()(b+"/addUser",{method:"POST",body:JSON.stringify({ip:t,selected:e}),headers:{"Content-Type":"application/json"}}).then(function(e){if(e.status>=400)throw new Error(e.json().toString());n({type:"USER_ADD_SUCCESS"})}).catch(function(e){return console.error(e)})}}(t,n)(e)}}})(U);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=n(23),A=n(38),G=Object(M.combineReducers)({polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selected:[],nextEntity:[],nextIndex:0,entities:[],summary:[],ip:"",exist:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return Object(A.a)({},e,{selected:e.selected.concat([t.selected]),nextEntity:e.entities.length>e.nextIndex?e.entities[e.nextIndex]:[],nextIndex:e.nextIndex+1});case"FETCH_ENTITIES":return e;case"GOT_ENTITIES":return Object(A.a)({},e,{entities:t.entities,nextEntity:t.entities.length>e.nextIndex?t.entities[e.nextIndex]:[],nextIndex:e.nextIndex+1});case"GOT_IP":return Object(A.a)({},e,{ip:t.ip});case"GET_SUMMARY":return Object(A.a)({},e,{summary:t.summary});case"UPDATE_EXIST":return Object(A.a)({},e,{exist:t.exist});default:return e}}}),N=n(135),J=n(136),R=Object(M.createStore)(G,Object(N.composeWithDevTools)(Object(M.applyMiddleware)(J.a))),W=n(11),B=Object(W.createMuiTheme)({overrides:{}});a.a.render(o.a.createElement(d.a,{store:R},o.a.createElement(W.MuiThemeProvider,{theme:B},o.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[233,2,1]]]);
//# sourceMappingURL=main.8e5ec5f5.chunk.js.map